00000000                                     1  * Codice del Nodo B
00000000                                     2  * IPOTESI:
00000000                                     3  *   - PIA1 connessa con il nodo A
00000000                                     4  
00000000                                     5  * AREA COSTANTI GLOBALI
00000000                                     6  
00000000  =00000004                          7  K_val           		EQU     	4
00000000  =00000005                          8  N_val           		EQU     	5
00000000  =00000028                          9  Tot_val		EQU		40
00000000  =00002006                         10  PIA1_DATA       	EQU     	$2006
00000000  =00002007                         11  PIA1_CNT        	EQU     	$2007
00000000                                    12  
00000000                                    13  * AREA DATI 
00008000                                    14                 		 ORG     	$8000
00008000  04                                15  k               		DC.B	   	 K_val
00008001  05                                16  n               		DC.B    	 N_val
00008002  28                                17  tot			DC.B		Tot_val
00008003                                    18  
00008003  B1 B1 B1 B1 B1 B2 B2 B2 B2 ...    19  messaggio       	DC.B    	$B1,$B1,$B1,$B1,$B1,$B2,$B2,$B2,$B2,$B2,$B3,$B3,$B3,$B3,$B3,$B4,$B4,$B4,$B4,$B4,$B5,$B5,$B5,$B5,$B5,$B6,$B6,$B6,$B6,$B6,$B7,$B7,$B7,$B7,$B7,$B8,$B8,$B8,$B8,$B8
0000802B                                    20  
0000802B                                    21  * STRUTTURE NECESSARIE PER IL DEBUGGING
00009900                                    22                  		ORG     	$9900
00009900  =00000000                         23  CONTINUE        	EQU     	0
00009900  =00000001                         24  STOP            		EQU     	1
00009900  01                                25  debug_var      		DC.B    	STOP
00009901                                    26                  
00009902                                    27                  		ORG     	$9902
00009902                                    28  BREAKPOINT
00009902  0C39 0000 00009900                29  			CMPI.B  	#CONTINUE,debug_var
0000990A  66F6                              30                  		BNE     	BREAKPOINT
0000990C  4E75                              31                  		RTS
0000990E                                    32  *****************************************
0000990E                                    33  *FUNZIONE INIT_PIA
0000990E  11FC 0000 2007                    34  INIT_PIA 	MOVE.B  	#0,PIA1_CNT
00009914  11FC 00FF 2006                    35                  	MOVE.B  	#$FF,PIA1_DATA
0000991A  11FC 00E4 2007                    36                  	MOVE.B  	#%11100100,PIA1_CNT
00009920  4E75                              37  		RTS
00009922                                    38  
00009922                                    39  *****************************************
00009922                                    40  
00009922                                    41  * AREA MAIN
00009922                                    42  
00008100                                    43                  	ORG     		$8100
00008100  4EB9 0000990E                     44  MAIN	    	JSR	     		INIT_PIA 
00008106  207C 00008003                     45                  	MOVEA.L 		#messaggio,A0
0000810C  1039 00008002                     46  		MOVE.B  		tot,D0	
00008112  4201                              47  		CLR.B			D1
00008114                                    48                  	*MULU    		n,D0			
00008114                                    49                  	*MULU    		#2,D0			;prodotto 2*n*k elementi
00008114  1438 2007                         50  WAIT_SEND    MOVE.B  		PIA1_CNT,D2		;In attesa di DATA ACKNOWLEDGE
00008118  0202 0080                         51                 	ANDI.B  		#$80,D2		;aspetta che CRB7 divenga 1
0000811C  67F6                              52                  	BEQ     		WAIT_SEND
0000811E  B001                              53                  	CMP.B   		D1,D0
00008120  6300 0016                         54                  	BLS     			FINE
00008124                                    55  
00008124  1438 2006                         56                  	MOVE.B  		PIA1_DATA,D2		
00008128  4EB9 00009902                     57                  	JSR     			BREAKPOINT 		;<- BREAKPOINT SULLA VARIABILE debug_var
0000812E  11F0 1000 2006                    58                  	MOVE.B  		(A0,D1),PIA1_DATA	;dato su bus di PIA porto B
00008134  5201                              59                  	ADDQ.B 		 #1,D1			
00008136  60DC                              60                  	BRA     		WAIT_SEND
00008138                                    61  
00008138                                    62  FINE            	END     		MAIN

No errors detected
No warnings generated
